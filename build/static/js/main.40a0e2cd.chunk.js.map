{"version":3,"sources":["components/Balance/Balance.module.css","components/Controls/Controls.js","components/Balance/Balance.js","components/TransactionHistory/TransactionHistory.js","components/Dashboard/Dashboard.js","components/App.js","index.js","components/Controls/Controls.module.css","components/TransactionHistory/TransactionHistory.module.css"],"names":["module","exports","Controls","onChange","onClick","amount","className","s","controls","type","name","value","input","button","defaultProps","Balance","balanceUp","balanceDown","balance","text","iconUp","role","aria-label","iconDown","TransactionHistory","transactions","history","htr","map","transaction","key","id","date","Dashboard","state","handleChange","target","setState","handleClick","addTransaction","dataState","nameType","notifyWarn","reset","transactionToAdd","shortid","generate","Date","toLocaleString","prevState","Number","notifyError","toast","warn","error","position","POSITION","TOP_LEFT","persistedState","localStorage","getItem","JSON","parse","this","prevProp","setItem","stringify","length","Component","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.40a0e2cd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"balance\":\"Balance_balance__30Dlf\",\"text\":\"Balance_text__27HS9\",\"iconUp\":\"Balance_iconUp__Tmyom\",\"iconDown\":\"Balance_iconDown__14Gkd\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Controls.module.css';\n\nconst Controls = ({ onChange, onClick, amount }) => {\n  return (\n    <section className={s.controls}>\n      <input\n        type=\"number\"\n        name=\"amount\"\n        value={amount}\n        onChange={onChange}\n        className={s.input}\n      />\n      <button\n        type=\"submit\"\n        name=\"deposit\"\n        onClick={onClick}\n        className={s.button}\n      >\n        Deposit\n      </button>\n      <button\n        type=\"submit\"\n        name=\"withdraw\"\n        onClick={onClick}\n        className={s.button}\n      >\n        Withdraw\n      </button>\n    </section>\n  );\n};\n\nControls.defaultProps = {\n  amount: '',\n};\n\nControls.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n  amount: PropTypes.string,\n};\n\nexport default Controls;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Balance.module.css';\n\nconst Balance = ({ balanceUp, balanceDown, balance }) => {\n  return (\n    <section className={s.balance}>\n      <p className={s.text}>\n        <span className={s.iconUp} role=\"img\" aria-label=\"deposit-up\">\n          ⬆\n        </span>\n        {balanceUp}$\n      </p>\n      <p className={s.text}>\n        <span className={s.iconDown} role=\"img\" aria-label=\"deposit-down\">\n          ⬇\n        </span>\n        {balanceDown}$\n      </p>\n      <span>Balance: {balance}$</span>\n    </section>\n  );\n};\n\nBalance.propTypes = {\n  balance: PropTypes.number.isRequired,\n  balanceUp: PropTypes.number.isRequired,\n  balanceDown: PropTypes.number.isRequired,\n};\n\nexport default Balance;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './TransactionHistory.module.css';\n\nconst TransactionHistory = ({ transactions }) => {\n  return (\n    <table className={s.history}>\n      <thead>\n        <tr className={s.htr}>\n          <th>Transaction</th>\n          <th>Amount</th>\n          <th>Date</th>\n        </tr>\n      </thead>\n      <tbody>\n        {transactions.map(transaction => (\n          <tr key={transaction.id}>\n            <td>{transaction.type}</td>\n            <td>{transaction.amount}$</td>\n            <td>{transaction.date}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\nTransactionHistory.propTypes = {\n  transactions: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string,\n      type: PropTypes.string,\n      amount: PropTypes.node,\n      date: PropTypes.string,\n    }).isRequired,\n  ).isRequired,\n};\n\nexport default TransactionHistory;\n","import React, { Component } from 'react';\nimport shortid from 'shortid';\nimport { ToastContainer, toast } from 'react-toastify';\nimport Controls from '../Controls/Controls';\nimport Balance from '../Balance/Balance';\nimport TransactionHistory from '../TransactionHistory/TransactionHistory';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default class Dashboard extends Component {\n  state = {\n    transactions: [],\n    balance: 0,\n    balanceUp: 0,\n    balanceDown: 0,\n    amount: '',\n  };\n\n  componentDidMount() {\n    const persistedState = localStorage.getItem('state');\n    if (persistedState) {\n      const state = JSON.parse(persistedState);\n      this.setState(state);\n    }\n  }\n\n  componentDidUpdate(prevProp, prevState) {\n    const { transactions } = this.state;\n    if (prevState.transactions !== transactions) {\n      localStorage.setItem('state', JSON.stringify(this.state));\n    }\n  }\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  handleClick = ({ target }) => {\n    const { name } = target;\n    this.addTransaction({ ...this.state }, name);\n  };\n\n  addTransaction = (dataState, nameType) => {\n    if (+dataState.amount === 0) {\n      this.notifyWarn();\n      this.reset();\n      return;\n    }\n    const transactionToAdd = {\n      ...dataState,\n      id: shortid.generate(),\n      type: nameType,\n      amount: +dataState.amount,\n      date: new Date().toLocaleString(),\n    };\n    if (nameType === 'deposit') {\n      this.setState(prevState => ({\n        transactions: [...prevState.transactions, transactionToAdd],\n        balance: dataState.balance + Number(dataState.amount),\n        balanceUp: dataState.balanceUp + Number(dataState.amount),\n      }));\n    } else {\n      if (+dataState.amount > dataState.balance) {\n        this.notifyError();\n        this.reset();\n        return;\n      }\n      this.setState(prevState => ({\n        transactions: [...prevState.transactions, transactionToAdd],\n        balance: dataState.balance - Number(dataState.amount),\n        balanceDown: dataState.balanceDown + Number(dataState.amount),\n      }));\n    }\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({\n      amount: '',\n    });\n  };\n\n  notifyWarn = () => toast.warn('Введите сумму для проведения операции!');\n\n  notifyError = () =>\n    toast.error('На счету недостаточно средств для проведения операции!', {\n      position: toast.POSITION.TOP_LEFT,\n    });\n\n  render() {\n    const {\n      transactions,\n      balance,\n      balanceUp,\n      balanceDown,\n      amount,\n    } = this.state;\n    return (\n      <div>\n        <Controls\n          onChange={this.handleChange}\n          onClick={this.handleClick}\n          amount={amount}\n        />\n        <ToastContainer />\n        <Balance\n          balanceUp={balanceUp}\n          balanceDown={balanceDown}\n          balance={balance}\n        />\n        {transactions.length > 0 && (\n          <TransactionHistory transactions={transactions} />\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Dashboard from './Dashboard/Dashboard';\n\nfunction App() {\n  return <Dashboard />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"controls\":\"Controls_controls__BY2-d\",\"input\":\"Controls_input__1zU3F\",\"button\":\"Controls_button__31jsY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"history\":\"TransactionHistory_history__3SkB0\",\"htr\":\"TransactionHistory_htr__1Od_P\"};"],"sourceRoot":""}